(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[472],{9540:function(e,t,l){Promise.resolve().then(l.bind(l,3646))},1781:function(e,t,l){"use strict";var n=l(7437),r=l(2265);t.Z=e=>{let{InputBoard:t,cellColor:l,onBoardUpdate:o=()=>{},mode:a}=e,[s,c]=(0,r.useState)([]),[i,h]=(0,r.useState)(-1),[f,u]=(0,r.useState)(!1),[g,d]=(0,r.useState)(-1),[p,m]=(0,r.useState)([]),[x,b]=(0,r.useState)([]),[w,v]=(0,r.useState)(9);(0,r.useEffect)(()=>{console.log("rerendering");let e=setTimeout(()=>{if(0!==s.length){let e=A();console.log(s,e),o(s),!0===e&&o("solved!")}},100);return()=>clearTimeout(e)},[p]),(0,r.useEffect)(()=>{E()},[p]);let j=()=>{console.log("board setup",x),c(t),m(Array.from({length:t.length+1},()=>[])),b(t),v(t.length)};(0,r.useEffect)(()=>{if(f){let e=setInterval(()=>{y()},200);return()=>{u(!0),clearInterval(e)}}},[]);let k=e=>{console.log("flow setup",x,t),c(e);let l=Array.from({length:e.length+1},()=>[]);for(let t=0;t<e.length;t++)for(let r=0;r<e.length;r++){let o=e[t][r];if(0!==x[t][r]&&0!==o&&l[o].length<=1){l[o]=[];let a=[t*e.length+r];for(;a.length>0;){var n=a.pop();if(void 0===n)break;l[o].push(n);let t=N(Math.floor(n/e.length),n%e.length,e.length,e.length);for(let n=0;n<t.length;n++){let r=t[n][0],s=t[n][1],c=r*e.length+s;e[r][s]!==o||l[o].includes(c)||a.push(c)}}}}m(l)};(0,r.useEffect)(()=>{""===a&&j(),"solution"===a&&k(t),"duel"===a&&(0===x.length&&j(),0!==x.length&&k(t))},[t]);let N=(e,t,l,n)=>{let r=[];for(let[o,a]of[[-1,0],[1,0],[0,-1],[0,1]]){let s=e+o,c=t+a;s>=0&&s<l&&c>=0&&c<n&&r.push([s,c])}return r},S=(e,t)=>{let l=O(s,t),n=p.map(e=>[...e]);if(l){d(t),h(l),u(!0),O(x,t)&&(n[l]=[]);let e=n[l].indexOf(t);-1!==e?n[l]=n[l].slice(0,e+1):n[l].push(t),m(n.map(e=>[...e]))}},M=(e,t)=>{e.preventDefault();let l=p.map(e=>[...e]);if(-1!==g&&-1!==i&&T(t,g,s.length)){if(0!==O(s,t)||R()){if(O(s,t)===i){if(l[i].includes(t)?l[i].splice(l[i].indexOf(t)+1,l[i].length):l[i].push(t),O(x,t)===i){let e=0;for(let t=0;t<l[i].length;t++)O(x,l[i][t])&&(e+=1);if(2===e){m(l.map(e=>[...e]));return}}d(t)}}else l[i].push(t),d(t),C(t)}m(l.map(e=>[...e]))},y=()=>{u(!1)},C=e=>{if(i){let t=s.map(e=>[...e]);t[Math.floor(e/s.length)][e%s.length]=i,c(t.map(e=>[...e]))}},E=()=>{let e=s.map(e=>[...e]),t=new Set(p[i]);for(let l=0;l<s.length;l++)for(let n=0;n<s[l].length;n++){let r=s[l][n],o=l*s.length+n;r!==i||t.has(o)||0!==x[l][n]||(e[l][n]=0)}c(e.map(e=>[...e]))},O=(e,t)=>e[Math.floor(t/s.length)][t%s.length],T=(e,t,l)=>Math.abs(Math.floor(e/l)-Math.floor(t/l))+Math.abs(e%l-t%l)===1,_=(e,t,l)=>{let n=Math.floor(e/l),r=e%l,o=Math.floor(t/l),a=t%l;return n<o?"bottom":n>o?"top":r<a?"right":r>a?"left":""},B=e=>{let{connector:t,val:l}=D(e);if(t)return"connector "+_(e,l,s.length)},D=e=>{let t=p[O(s,e)],l=t.indexOf(e);return{connector:-1!==l&&l!==t.length-1&&t.length>1,val:t[l+1]}},I=e=>{let t=p[O(s,e)],l=t.indexOf(e);return -1!==l&&l===t.length-1&&t.length>1||0!==O(x,e)},z=e=>{let{connector:t,val:n}=D(e),r=O(s,e);return!t||O(x,e)?{background:l[r]}:{}},F=(e,t)=>{let{connector:n,val:r}=D(t);if(n){let n=_(t,r,s.length);switch(n){case"top":n="Bottom";break;case"bottom":n="Top";break;case"left":n="Right";break;case"right":n="Left"}let o=Z(-1);return{backgroundColor:l[e],width:"".concat(o/4,"px"),height:"".concat(o+.25,"px"),["margin".concat(n)]:"".concat(.75*o,"px")}}return{}},Z=e=>{let t=.75*Math.min(window.innerHeight,window.innerWidth)/w,l=!1;if(-1!==e){l=0!==O(x,e);let n=O(s,e),r=p[n].indexOf(e),o=r===p[n].length-1&&-1!==r;if(!l&&o)return t/1.75}return l?t/1.5:t},A=()=>{if(0===s.length)return!1;for(let e=0;e<w;e++)for(let t=0;t<w;t++)if(0===s[e][t])return!1;let e=p.map(e=>[...e]);for(let t of(e.shift(),e)){let e=0;for(let l of t)O(x,l)&&(e+=1);if(e<2)return!1}return!0},R=()=>{let e=0;for(let t of p[i])O(x,t)&&(e+=1);return 2===e};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"text-center p-5 m-5",children:(0,n.jsx)("div",{className:"board grid",style:{gridTemplateColumns:"repeat(".concat(w,", 1fr)"),gridTemplateRows:"repeat(".concat(w,", 1fr)")},children:s.flat().map((e,t)=>(0,n.jsx)(r.Fragment,{children:(0,n.jsxs)("div",{style:{width:"".concat(Z(-1),"px"),height:"".concat(Z(-1),"px")},className:"boardCell flex justify-center items-center",children:[D(t)&&(0,n.jsx)("div",{draggable:!0,className:"".concat(B(t)),style:F(e,t)}),(0,n.jsx)("button",{draggable:!0,onDragStart:e=>S(e,t),onDragOver:e=>M(e,t),onDrop:y,style:{...z(t),width:"".concat(Z(t),"px"),height:"".concat(Z(t),"px")},className:"flex justify-center item-center \n          ".concat(I(t)?"circle":""),children:I(t)?e:""})]})},t))})})})}},3646:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return h}});var n=l(7437),r=l(2265),o=l(8472),a=l(6463),s=l(1781);let c=e=>{let t={};for(let l=0;l<=e;l++)t[l]=i();return t[0]="",t},i=()=>{let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};function h(){let[e,t]=(0,r.useState)({}),[l,i]=(0,r.useState)([]),[h,f]=(0,r.useState)(9),[u,g]=(0,r.useState)(""),d=(0,a.useRouter)();(0,r.useEffect)(()=>{p()},[]);let p=()=>{h<=1||o.Z.post("https://flow-free.onrender.com/puzzle/",{size:h}).then(e=>{if("Invalid Input"===e.data){console.log("error!");return}i(e.data),t(c(e.data.length)),g("")})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:"bg-white text-black px-4 m-2",onClick:()=>d.push("/"),children:"Back"}),(0,n.jsx)(s.Z,{InputBoard:l,cellColor:e,mode:u}),(0,n.jsxs)("div",{className:"flex flex-row gap-4 cursor-pointer my-2",style:{marginTop:"25px"},children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)("button",{className:" h-full w-full bg-white rounded text-black px-4",onClick:()=>{o.Z.get("https://flow-free.onrender.com/solution").then(e=>{i(e.data),g("solution")})},children:(0,n.jsx)("p",{children:"View Solution"})})}),(0,n.jsxs)("div",{className:"w-full flex flex-col gap-2 bg-black",children:[(0,n.jsx)("label",{children:(0,n.jsx)("input",{placeholder:"Enter board size: ",className:"w-full rounded p-2 text-black",type:"number",defaultValue:h,onChange:e=>f(Number(e.target.value))})}),(0,n.jsx)("div",{className:"fit-content bg-white rounded p-2 text-black",onClick:p,children:"Generate Board "})]})]})]})}}},function(e){e.O(0,[870,170,971,23,744],function(){return e(e.s=9540)}),_N_E=e.O()}]);